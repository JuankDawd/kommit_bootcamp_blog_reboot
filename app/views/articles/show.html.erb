<% relationship = Relationship.new %>
<div class="mx-auto mt-16 text-center rounded overflow-hidden shadow-lg p-10">
  <div class="font-sans">
    <%= link_to "Go Back", articles_path(), class: "text-base md:text-sm text-indigo-600 font-bold flex justify-start" %>
    <h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl"><%= @article.title %></h1>
    <p class="text-sm md:text-base font-normal text-gray-600">Published <%= @article.created_at.strftime("%d %B, %Y") %></p>
    <br>
    <p class="text-sm md:text-base font-normal text-gray-900"><%= @article.body %></p>
  </div>
  <% if current_user.id == @article.user_id %>
    <h2 class="mb-4 text-lg font-gray-100 italic">Article Options</h2>
    <div class="flex space-x-11 justify-center">
      <%= link_to "Edit", edit_article_path(@article), class: "bg-gray-200 focus:outline-none transition duration-150 ease-in-out hover:bg-gray-300 dark:bg-gray-700 rounded text-indigo-600 dark:text-indigo-600 px-7  py-1 focus:ring-2 focus:ring-offset-2 focus:ring-gray-700 flex-3" %>
      <%= link_to "Destroy", article_path(@article), class: "bg-gray-200 focus:outline-none transition duration-150 ease-in-out hover:bg-gray-300 dark:bg-gray-700 rounded text-indigo-600 dark:text-indigo-600 px-7  py-1 focus:ring-2 focus:ring-offset-2 focus:ring-gray-700 flex-3",method: :delete , data: { confirm: "Are you sure?" } %>
    </div>
  <% end %>
  <br>
  <div class="container w-full md:max-w-3xl mx-auto pt-20">
    <hr class="border-b-2 border-gray-400 mb-8 mx-4">
  </div>
  <div class="py-8 flex justify-center">
    <div class="w-1/2 bg-white shadow rounded p-6 content-center ">
      <div class="flex items-end">
        <p tabindex="0" class="focus:outline-none text-xl font-semibold leading-5 text-gray-800">Comments</p>
      </div>
      <% if @article.comments.public_count > 0 %>
        <%= render @article.comments %>
      <% else %>
        <% if current_user.id == @article.user_id %>
          <p class="mb-4 text-lg font-gray-100 italic text-gray-500">
            No one has commented you article yet!
          </p>
        <% else %>
          <p class="mb-4 text-lg font-gray-100 italic text-gray-500">Be the first one to comment!</p>
        <% end %>
      <% end %>
    </div>
  </div>
  <% if current_user.id != @article.user_id %>
    <% if relationship.follow?(@article.user_id, current_user.id) %>
      <div>
        <h2>Follow the blogger to comment!</h2>
        <%= form_with model: relationship do |form| %>
          <div class="field">
            <%= form.hidden_field :other_user, value: @article.user_id %>
          </div>
          <div>
            <%= form.submit %>
          </div>
        <% end %>
      </div>
    <% else %>
      <div>
        <h2>Add a comment:</h2>
        <%= render 'comments/form' %>
      </div>
    <% end %>
  <% end %>
</div>
